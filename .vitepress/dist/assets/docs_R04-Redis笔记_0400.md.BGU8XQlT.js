import{_ as t,C as n,c as h,o as l,j as i,G as k,ai as e,a as p}from"./framework-Cfw8I1ux.js";const B=JSON.parse('{"title":"数据结构","description":"","frontmatter":{},"headers":[],"relativePath":"docs/R04-Redis笔记/0400.md","filePath":"docs/R04-Redis笔记/0400.md"}'),d={name:"docs/R04-Redis笔记/0400.md"};function r(F,s,E,y,g,C){const a=n("ArticleMetadata");return l(),h("div",null,[s[0]||(s[0]=i("h1",{id:"数据结构",tabindex:"-1"},[p("数据结构 "),i("a",{class:"header-anchor",href:"#数据结构","aria-label":'Permalink to "数据结构"'},"​")],-1)),k(a),s[1]||(s[1]=e(`<hr><p>在学习任何技术之前，我总是习惯先思考：它的出现背后有什么深层次的意义？🤔 如果没有它，是否还有其他可行的解决方案？今天，我们来探讨一下Redis的背景，以及如果没有Redis，我们在使用Java时可能面临的挑战。</p><p><strong>1. 单机时代：用集合存储数据 🖥️</strong></p><ul><li><strong>少量数据时</strong>：我们可以直接用集合或现成的安全集合缓存数据，简单高效。⚡</li><li><strong>数据量激增时</strong>：当数据量飙升时，内存撑不住，<code>OutOfMemoryError</code> 直接让应用崩溃。💥</li></ul><p><strong>2. 多实例时代：数据如何共享? 🔄</strong><br> 随着应用部署多个实例（比如：应用A和应用B），每个实例的内存是隔离的，集合里的数据无法直接共享。举个例子，用户登录后，应用A在内存中保存了Session数据，但应用B却无法访问到这个Session，导致用户必须重复登录。🔒</p><p><strong>针对上面两个问题，如果没有Redis，我们该怎么办？ 🤷‍♂️</strong></p><p>假设没有Redis的帮助，以下是我想出来的两种可能方案：</p><ul><li><p><strong>方案1：用数据库（如MySQL）当缓存</strong><br> 尽管数据库能够存储数据，但它的访问速度无法与内存中的数据存取相比。而且，当系统面临高并发时，数据库很容易成为瓶颈，无法承载如此庞大的请求量。🐢</p></li><li><p><strong>方案2：自己实现一个共享内存服务</strong><br> 你可以尝试自定义一个共享内存服务，但这无疑会大大增加系统的复杂性，同时带来不小的稳定性风险。在没有Redis的情况下，开发者不仅需要处理内存管理，还要考虑高可用、故障恢复等复杂问题。⚙️ Redis的出现解决了在单机或多实例情况下的数据共享问题，并提供了极高的性能。它的出现让我们无需从头开始实现这些复杂的机制，可以专注于更高层次的业务逻辑，极大地提升了开发效率。🚀</p></li></ul><p>把Redis的背后意义想明白后，接下来我们就来学习它的基本数据结构。Redis其实就是保存程序在执行过程中的状态。为了更好理解，我们可以将Redis的各个数据结构与Java中的集合类进行对比。📚</p><p>Redis的主要数据结构有：STRING(字符串)、LIST(列表)、SET(集合)、HASH(散列)、ZSET(有序集合)</p><h2 id="string-字符串" tabindex="-1">STRING（字符串） <a class="header-anchor" href="#string-字符串" aria-label="Permalink to &quot;STRING（字符串）&quot;">​</a></h2><h3 id="基础操作" tabindex="-1">基础操作 <a class="header-anchor" href="#基础操作" aria-label="Permalink to &quot;基础操作&quot;">​</a></h3><ul><li>SET 设置值</li><li>GET 获取值</li><li>DEL 删除值</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hello</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> world</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OK</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hello</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;world&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">del</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hello</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hello</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>常用API：</p><table tabindex="0"><thead><tr><th>API</th><th>说明</th><th>复杂度</th></tr></thead><tbody><tr><td>get key</td><td>获取key对应的value</td><td>O(1)</td></tr><tr><td>set key value</td><td>设置key-value，不管key是否存在，都设置</td><td>O(1)</td></tr><tr><td>del key</td><td>删除key-value</td><td>O(1)</td></tr><tr><td>incr key</td><td>key自增1，如果key不存在，自增后get(key)=1</td><td>O(1)</td></tr><tr><td>decr key</td><td>key自减1，如果key不存在，自减后get(key)=-1</td><td>O(1)</td></tr><tr><td>incrby key k</td><td>key自增k，如果key不存在，自增后get(key)=k</td><td>O(1)</td></tr><tr><td>decrby key k</td><td>key自减k，如果key不存在，自减后get(key)=-k</td><td>O(1)</td></tr><tr><td>setnx key value</td><td>key不存在，才设置</td><td>O(1)</td></tr><tr><td>set key value xx</td><td>key存在，才设置</td><td>O(1)</td></tr><tr><td>mget key1 key2 key3 ...</td><td>批量获取key，原子操作</td><td>O(n)</td></tr><tr><td>mset key1 value1 key2 value2 ...</td><td>批量设置key-value</td><td>O(n)</td></tr><tr><td>getset key newvalue</td><td>set key newvalue并返回旧的value</td><td>O(1)</td></tr><tr><td>append key value</td><td>将value追加到旧的value</td><td>O(1)</td></tr><tr><td>strlen key</td><td>返回字符串的长度（注意中文）</td><td>O(1)</td></tr><tr><td>incrbyfloat key 2.3</td><td>增加key对应的值2.3</td><td>O(1)</td></tr><tr><td>getrange key start end</td><td>获取字符串指定下标的所有值</td><td>O(1)</td></tr><tr><td>setrange key index value</td><td>设置指定下标（index）所有对应的值</td><td>O(1)</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li>EX 指定过期的秒时间，PX指定过期的毫秒时间</li><li>NX：只有key不存在的时候，才设置成功</li><li>XX：只有key存在的时候，才设置成功</li><li><span class="marker-text">5.0</span>支持set命令指定过期时间和不存在的时候才设置成功，<span class="marker-text">也就是通过一条命令就可以实现分布式锁加锁的功能</span>，以前的版本设置key和设置过期时间需要分成两个命令，原子性保证难度更大。</li></ul></div><h3 id="使用场景" tabindex="-1">使用场景 <a class="header-anchor" href="#使用场景" aria-label="Permalink to &quot;使用场景&quot;">​</a></h3><h4 id="场景1-热点数据缓存-分布式会话" tabindex="-1">场景1:热点数据缓存,分布式会话 <a class="header-anchor" href="#场景1-热点数据缓存-分布式会话" aria-label="Permalink to &quot;场景1:热点数据缓存,分布式会话&quot;">​</a></h4><p>热点数据缓存案例:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cache_key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> value</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EX</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3600</span></span></code></pre></div><h4 id="场景2-setnx分布式锁" tabindex="-1">场景2:Setnx分布式锁 <a class="header-anchor" href="#场景2-setnx分布式锁" aria-label="Permalink to &quot;场景2:Setnx分布式锁&quot;">​</a></h4><p><strong>获取锁:使用SET命令设置一个键，并设置过期时间。</strong></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lock_key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unique_identifier</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EX</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NX</span></span></code></pre></div><ul><li>lock_key：锁的键名。</li><li>unique_identifier：一个唯一的标识符，通常是随机生成的 UUID，用于区分不同的锁持有者。</li><li>EX 10：设置锁的过期时间为 10 秒，防止死锁。</li><li>NX：仅在键不存在时设置键，确保只有一个客户端可以获得锁。</li></ul><p><strong>释放锁:释放锁时，需要确保只有持有锁的客户端才能释放它。</strong></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lock_key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unique_identifier</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    DEL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lock_key</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>检查当前持有者是否与 unique_identifier 匹配，只有匹配时才执行 DEL 命令。</p><h3 id="场景3-incr计数器-全局id" tabindex="-1">场景3:Incr计数器/全局ID <a class="header-anchor" href="#场景3-incr计数器-全局id" aria-label="Permalink to &quot;场景3:Incr计数器/全局ID&quot;">​</a></h3><p>计数器案例:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 初始化计数器</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> counter_key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 增加计数器</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">INCR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> counter_key</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # counter_key 的值变为 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">INCR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> counter_key</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # counter_key 的值变为 2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看计数器值</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> counter_key</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 返回 2</span></span></code></pre></div><h3 id="场景5-incr限流" tabindex="-1">场景5:Incr限流 <a class="header-anchor" href="#场景5-incr限流" aria-label="Permalink to &quot;场景5:Incr限流&quot;">​</a></h3><h3 id="bit-操作-位图功能-在线用户统计-0-1标记" tabindex="-1">bit 操作,位图功能，在线用户统计 0/1标记 <a class="header-anchor" href="#bit-操作-位图功能-在线用户统计-0-1标记" aria-label="Permalink to &quot;bit 操作,位图功能，在线用户统计 0/1标记&quot;">​</a></h3><h3 id="底层原理" tabindex="-1">底层原理 <a class="header-anchor" href="#底层原理" aria-label="Permalink to &quot;底层原理&quot;">​</a></h3><h2 id="list-列表" tabindex="-1">LIST（列表） <a class="header-anchor" href="#list-列表" aria-label="Permalink to &quot;LIST（列表）&quot;">​</a></h2><p>列表可以有序存储多个字符串，其中字符串可以相同。</p><ul><li><p>LPUSH 将元素推入列表的左端</p></li><li><p>RPUSH 将元素推入列表的右端</p></li><li><p>LPOP 将元素从列表左端弹出</p></li><li><p>RPOP 将元素从列表右端弹出</p></li><li><p>LINDEX 获取列表在给定位置上的单个元素</p></li><li><p>LRANGE 获取列表在给定范围的所有元素</p></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rpush</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> item</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rpop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list-key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;item&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rpop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list-key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;item&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rpush</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> item</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rpush</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> item2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rpush</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> item</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lrange</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list-key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;item&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;item2&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;item&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lindex</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list-key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;item2&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lpop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list-key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;item&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lrange</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list-key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;item2&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;item&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>常用API：</p><table tabindex="0"><thead><tr><th>API</th><th>说明</th><th>复杂度</th></tr></thead><tbody><tr><td>lpush key value1 [value2]</td><td>将一个或多个值推入列表的左端</td><td>O(1)</td></tr><tr><td>rpush key value1 [value2]</td><td>将一个或多个值推入列表的右端</td><td>O(1)</td></tr><tr><td>linsert key before</td><td>after value newValue</td><td>在list指定的值前</td></tr><tr><td>lpop key</td><td>移除并返回列表最左端的元素</td><td>O(1)</td></tr><tr><td>rpop key</td><td>移除并返回列表最右端的元素</td><td>O(1)</td></tr><tr><td>ltrim key start end</td><td>按照索引范围修剪列表</td><td>O(n)</td></tr><tr><td>lindex key offset</td><td>返回列表中偏移量为offset的元素</td><td>O(n)</td></tr><tr><td>lrange key start end</td><td>获取列表指定索引范围所有元素</td><td>O(n)</td></tr><tr><td>llen key</td><td>获取列表长度</td><td>O(1)</td></tr><tr><td>lset key index newValue</td><td>设置列表指定索引值为newValue</td><td>O(n)</td></tr><tr><td>blpop key timeout</td><td>lpop阻塞版本，timeout为阻塞超时时间，=0为不阻塞</td><td>O(1)</td></tr><tr><td>brpop key timeout</td><td>rpop阻塞版本，timeout为阻塞超时时间，=0为不阻塞</td><td>O(1)</td></tr></tbody></table><h2 id="set-集合" tabindex="-1">SET（集合） <a class="header-anchor" href="#set-集合" aria-label="Permalink to &quot;SET（集合）&quot;">​</a></h2><p>集合可以存储不同多个字符串，且无序</p><ul><li><p>SADD 将元素添加到集合中</p></li><li><p>SREM 从集合里面移除元素，如果这个元素存在</p></li><li><p>SISMEMBER 快速检查一个元素是否已经存在集合中</p></li><li><p>SMEMBERS 获取集合包含的所有元素（如果集合包含的元素非常多，那么命令执行速度回很慢，谨慎使用）</p></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sadd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> item</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sadd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> item2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sadd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> item3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sadd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> item</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">smembers</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set-key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;item3&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;item2&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;item&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sismember</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> item4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sismember</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> item</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">srem</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> item2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">srem</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> item2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">smembers</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set-key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;item3&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;item&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>常用API：</p><table tabindex="0"><thead><tr><th>API</th><th>说明</th><th>复杂度</th></tr></thead><tbody><tr><td>sadd key element</td><td>向集合key添加element（如果element已经存在，添加失败）</td><td>O(1)</td></tr><tr><td>srem key element</td><td>将集合key中的element移除</td><td>O(1)</td></tr><tr><td>sismember key element</td><td>检查元素element是否存在于集合key中</td><td>O(1)</td></tr><tr><td>smembers key</td><td>返回集合包含的所有元素</td><td>O(N)</td></tr></tbody></table><h2 id="hash-散列" tabindex="-1">HASH（散列） <a class="header-anchor" href="#hash-散列" aria-label="Permalink to &quot;HASH（散列）&quot;">​</a></h2><p>Redis可以存储多个键值对之间的映射，hash 是一个string类型的field和value的映射表，适合存储对象。</p><ul><li>HSET 在散列里面关联起给定的键值对</li><li>HGET 获取指定散列键的值</li><li>HGETALL 获取散列包含的所有键值对</li><li>HDEL 如果给定键存在于散列里面，那么删除这个键</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hset</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hash-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sub-key1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> value1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hset</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hash-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sub-key2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> value2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hset</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hash-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sub-key1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> value1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hgetall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hash-key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sub-key1&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;value1&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sub-key2&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;value2&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hdel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hash-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sub-key2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hdel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hash-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sub-key2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hash-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sub-key1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;value1&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hgetall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hash-key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sub-key1&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;value1&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><table tabindex="0"><thead><tr><th>API</th><th>说明</th><th>复杂度</th></tr></thead><tbody><tr><td>hget key field</td><td>获取hash key对应的field的value</td><td>O(1)</td></tr><tr><td>hset key field value</td><td>设置hash key对应的field的value</td><td>O(1)</td></tr><tr><td>hdel key field</td><td>删除hash key对应的field的value</td><td>O(1)</td></tr><tr><td>hexists key field</td><td>判断hash key是否有field</td><td>O(1)</td></tr><tr><td>hlen key</td><td>获取hash key field的数量</td><td>O(1)</td></tr><tr><td>hmget key field1 field2 ...</td><td>批量获取hash key的一批field对应的值</td><td>O(n)</td></tr><tr><td>hmset key field1 value1 field2 value2 ...</td><td>批量设置hash key的一批field value</td><td>O(n)</td></tr><tr><td>hgetall key</td><td>返回hash key对应所有的field和value</td><td>O(n)</td></tr><tr><td>hvals key</td><td>返回hash key对应所有field的value</td><td>O(n)</td></tr><tr><td>hkeys key</td><td>返回hash key对应所有field</td><td>O(n)</td></tr><tr><td>hsetnx key field value</td><td>设置hash key对应的field的value（如果field已经存在，则失败）</td><td>O(1)</td></tr><tr><td>hincrby key field intCounter</td><td>hash key对应的field的value自增intCounter</td><td>O(1)</td></tr><tr><td>hincrbyfloat key field floatCounter</td><td>hash key对应的field的value自增floatCounter</td><td>O(1)</td></tr></tbody></table><h2 id="zset-有序集合" tabindex="-1">ZSET（有序集合） <a class="header-anchor" href="#zset-有序集合" aria-label="Permalink to &quot;ZSET（有序集合）&quot;">​</a></h2><p>有序集合和散列一样，都用于存储键值对：有序集合的键被称为成员（member），每个成员都是各不相同的；有序集合的值被称为分值（score），分值必须使用浮点数。有序集合是Redis里面唯一一个既可以根据成员访问元素，又可以根据分值以及分值的排列顺序来访问元素的结构。</p><p>使用场景：例如基于发表时间排序的文章列表、基于投票数量排序的文章列表等。</p><ul><li>ZADD 将一个带有给定分值的成员添加到有序集合里面</li><li>ZRANGE 根据元素在有序排列中所处的位置，从有序集合中取出多个元素</li><li>ZRANGEBYSCORE 获取有序集合在给定分值范围内的所有元素</li><li>ZREM 如果给定成员存在于有序集合中，那么移除这个成员</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zadd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zset-key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 728</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> member1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zadd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zset-key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 985</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> member0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zadd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zset-key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 985</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> member0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zrange</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zset-key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> withscores</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;member1&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;728&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;member0&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;985&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zrangebyscore</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zset-key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 800</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> withscores</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;member1&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;728&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zrem</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zset-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> member1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zrem</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zset-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> member1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zrange</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zset-key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> withscores</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;member0&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;985&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">127.0.0.1:6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>常用API：</p><table tabindex="0"><thead><tr><th>API</th><th>说明</th><th>复杂度</th></tr></thead><tbody><tr><td>zadd key score element</td><td>添加score和element</td><td>O(logN)</td></tr><tr><td>zrem key element</td><td>删除元素</td><td>O(1)</td></tr><tr><td>zscore key element</td><td>返回元素的分数</td><td>O(1)</td></tr><tr><td>zincrby key increScore element</td><td>增加或减少元素的分数</td><td>O(1)</td></tr><tr><td>zcard key</td><td>返回元素的总个数</td><td>O(1)</td></tr><tr><td>zrange key start end [WITHSCORES]</td><td>返回指定索引范围内的升序元素【分值】</td><td>O(log(n)+m)</td></tr><tr><td>zrangebyscore key minScore maxScore [WITHSCORES]</td><td>返回指定分数范围内的升序元素【分值】</td><td>O(log(n)+m)</td></tr><tr><td>zcount key minScore maxScore</td><td>返回有序集合内在指定分数范围内的个数</td><td>O(log(n)+m)</td></tr><tr><td>zremrangebyrank key start end</td><td>删除指定排名内的升序元素</td><td>O(log(n)+m)</td></tr><tr><td>zremrangebyscore key minScore maxScore</td><td>删除指定分数内的升序元素</td><td>O(log(n)+m)</td></tr></tbody></table>`,58))])}const c=t(d,[["render",r]]);export{B as __pageData,c as default};
